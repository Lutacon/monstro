<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" type="image/x-icon" href="/monstro/favicon.ico">
    <title>Monstro</title>
    <style>
      #app {
        display: flex;
        justify-content: center;
        height: 95vh;
        align-items: center;
        flex-wrap: wrap;
        text-align: center;
      }
      h1 {
        font-family: "Arial Black", Gadget, sans-serif;
        position: absolute;
        font-size: 10rem;
        margin: 0;
      }
    </style>
</head>

<body>
  
  <div id="app"></div>
  <script>

    const CHANCEMULTIPLIER = 0.9;

    const adjs = [
      'mostro', 'genio', 'figura', 'crack', 'mastodonte', 'batería de grupo', 'infantil', 'cuádruple bombo', 'ídolo', 'chaval', 'champion', 'referente', 'maquina', 'artista', 'elemento', 'jefe', 'fiera', 'maestro', 'socio', 'golfo', 'valiente', 'héroe', 'tanque', 'fenómeno', 'gacela', 'tigre', 'bestia', 'titán', 'gigante', 'prenda', 'coloso', 'hacha', 'mostrenco', 'campeón', 'helicóptero', 'killer', 'ciclón', 'pieza', 'brontosaurio', 'vikingo', 'vividor', 'crack', 'animal', 'gigante', 'caimán', 'tiranosaurio', 'superman', 'semental', 'ninja', 'genio', 'tsunami', 'león', 'terminator', 'goliat', 'terremoto', 'tigre', 'vaquero', 'tanque', 'mole', 'samurai', 'coloso', 'paladin', 'willyrex', 'lobezno', 'velociraptor', 'espectro', 'godzilla', 'caza de combate', 'adamantium', 'robocop', 'zeus', 'capitán', 'king kong', 'depredador', 'tornado', 'monster truck', 'presa canario', 'johnny bravo', 'mastodonte', 'coronel', 'canallita', 'champion', 'chulazo', 'truhan', 'maquinola', 'mamotreto', 'mosampo', 'piano de cola'
    ];

    const adjsMap = new Map();
    adjs.forEach((value, index) => {
      if (sessionStorage.getItem(index)) {
        const sessionChance = sessionStorage.getItem(index)
        return adjsMap.set(index, { value, chance: sessionChance });
      }
      return adjsMap.set(index, { value, chance: 1 });
    });

    const randomAdjId = Array.from(adjsMap.values()).reduce(({ id, highterRandomValue }, item, index) => {

      const currentRandomValue = Math.random() * item.chance * adjsMap.size;

      return currentRandomValue > highterRandomValue
        ? { id: index, highterRandomValue: currentRandomValue }
        : { id, highterRandomValue };

    }, { id: -1, highterRandomValue: -1 }).id;

    let adj = adjsMap.get(randomAdjId);

    const chance = adj.chance *= CHANCEMULTIPLIER;
    sessionStorage.setItem(randomAdjId, chance);

    const appDiv = document.getElementById('app');
    appDiv.innerHTML = `<h1>${adj.value}</h1>`;
  </script>
</body>

</html>